# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞ (Docker)

–≠—Ç–æ—Ç —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –ø–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é –±–æ—Ç–æ–º, –æ–±–Ω–æ–≤–ª–µ–Ω–∏—é –∫–æ–¥–∞ –∏ —Ä–µ—à–µ–Ω–∏—é –ø—Ä–æ–±–ª–µ–º.

## üìö –¢–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏—è: –ß—Ç–æ –µ—Å—Ç—å —á—Ç–æ?

–ß—Ç–æ–±—ã –Ω–µ –ø—É—Ç–∞—Ç—å—Å—è –≤ –∫–æ–º–∞–Ω–¥–∞—Ö, –ø–æ–ª–µ–∑–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å —Ç—Ä–∏ —Ç–µ—Ä–º–∏–Ω–∞:

1.  **`aeroflot-bot` (–û–±—Ä–∞–∑ / Image)**:
    –≠—Ç–æ "—á–µ—Ä—Ç–µ–∂" –∏–ª–∏ "—É—Å—Ç–∞–Ω–æ–≤–æ—á–Ω—ã–π –¥–∏—Å–∫" –≤–∞—à–µ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã. –û–Ω —Å–æ–∑–¥–∞–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–æ–π `docker build`. –û–Ω –ª–µ–∂–∏—Ç –Ω–∞ –¥–∏—Å–∫–µ –∏ –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ—Ç —Å–∞–º –ø–æ —Å–µ–±–µ. –í–Ω—É—Ç—Ä–∏ –Ω–µ–≥–æ –∑–∞—à–∏—Ç—ã –∫–æ–¥, –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.
    *–ê–Ω–∞–ª–æ–≥–∏—è: –§–∞–π–ª —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫–∞ Windows (ISO) –∏–ª–∏ –∫–ª–∞—Å—Å –≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏.*

2.  **`milestrade_bot` (–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä / Container)**:
    –≠—Ç–æ **—Ä–∞–±–æ—Ç–∞—é—â–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞**, —Å–æ–∑–¥–∞–Ω–Ω–∞—è –∏–∑ –æ–±—Ä–∞–∑–∞. –ö–æ–≥–¥–∞ –≤—ã –¥–µ–ª–∞–µ—Ç–µ `docker run`, –≤—ã —Å–æ–∑–¥–∞–µ—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏–∑ –æ–±—Ä–∞–∑–∞.
    *–ê–Ω–∞–ª–æ–≥–∏—è: –ó–∞–ø—É—â–µ–Ω–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ Windows –∏–ª–∏ –æ–±—ä–µ–∫—Ç –∫–ª–∞—Å—Å–∞.*

3.  **`Docker`**:
    –≠—Ç–æ –ø—Ä–æ–≥—Ä–∞–º–º–∞, –∫–æ—Ç–æ—Ä–∞—è —É–ø—Ä–∞–≤–ª—è–µ—Ç –æ–±—Ä–∞–∑–∞–º–∏ –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏.

---

## üõ† –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

–í—Å–µ –∫–æ–º–∞–Ω–¥—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª–∏ —Å–µ—Ä–≤–µ—Ä–∞.

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
–†–∞–±–æ—Ç–∞–µ—Ç –ª–∏ –±–æ—Ç –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å?
```bash
docker ps -a | grep milestrade_bot
```
*   –°—Ç–∞—Ç—É—Å **Up**: –†–∞–±–æ—Ç–∞–µ—Ç.
*   –°—Ç–∞—Ç—É—Å **Exited**: –û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏–ª–∏ —É–ø–∞–ª —Å –æ—à–∏–±–∫–æ–π.

### 2. –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
–ß—Ç–æ –ø–∏—à–µ—Ç –±–æ—Ç? (–û—à–∏–±–∫–∏, —Å–æ–æ–±—â–µ–Ω–∏—è –æ –∑–∞–ø—É—Å–∫–∞—Ö)
```bash
docker logs -f milestrade_bot
```
*(–ù–∞–∂–º–∏—Ç–µ `Ctrl+C`, —á—Ç–æ–±—ã –≤—ã–π—Ç–∏ –∏–∑ —Ä–µ–∂–∏–º–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞)*

### 3. –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
–ï—Å–ª–∏ –±–æ—Ç –∑–∞–≤–∏—Å –∏–ª–∏ –Ω—É–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å:
```bash
docker restart milestrade_bot
```

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å:
```bash
docker stop milestrade_bot
```

### 4. –£–¥–∞–ª–µ–Ω–∏–µ (–¥–ª—è –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∏)
–£–¥–∞–ª—è–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –Ω–æ –Ω–µ —É–¥–∞–ª—è–µ—Ç –æ–±—Ä–∞–∑ –∏ —Ñ–∞–π–ª—ã.
```bash
docker rm -f milestrade_bot
```

---

## üîÑ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –≤–Ω–µ—Å–µ–Ω–∏—é –∏–∑–º–µ–Ω–µ–Ω–∏–π (–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ)

–ï—Å–ª–∏ –≤—ã –∏–∑–º–µ–Ω–∏–ª–∏ –∫–æ–¥ –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ –∏ –∑–∞–≥—Ä—É–∑–∏–ª–∏ –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä, **–±–æ—Ç —Å–∞–º –Ω–µ –æ–±–Ω–æ–≤–∏—Ç—Å—è**. –ù—É–∂–Ω–æ –ø–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å "–æ–±—Ä–∞–∑" –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å "–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä".

**–ê–ª–≥–æ—Ä–∏—Ç–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:**

1.  **–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª—ã** –Ω–∞ —Å–µ—Ä–≤–µ—Ä (—á–µ—Ä–µ–∑ SFTP –∏–ª–∏ git pull).
2.  **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É**: `cd ~/bot`
3.  **–ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –æ–±—Ä–∞–∑** (—Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π "—á–µ—Ä—Ç–µ–∂" –∏–∑ –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤):
    ```bash
    docker build -t aeroflot-bot .
    ```
4.  **–£–¥–∞–ª–∏—Ç–µ —Å—Ç–∞—Ä—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä** (—Å—Ç–∞—Ä—É—é —Ä–∞–±–æ—Ç–∞—é—â—É—é –∫–æ–ø–∏—é):
    ```bash
    docker rm -f milestrade_bot
    ```
5.  **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –Ω–æ–≤—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä** –∏–∑ –Ω–æ–≤–æ–≥–æ –æ–±—Ä–∞–∑–∞:
    ```bash
    docker run -d \
      --restart unless-stopped \
      --env-file .env \
      --shm-size=2gb \
      --name milestrade_bot \
      aeroflot-bot
    ```

---

## üÜò –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

**1. –û—à–∏–±–∫–∞ "Conflict. The container name ... is already in use"**
–í—ã –ø—ã—Ç–∞–µ—Ç–µ—Å—å –∑–∞–ø—É—Å—Ç–∏—Ç—å (`run`) –Ω–æ–≤—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –Ω–µ —É–¥–∞–ª–∏–≤ —Å—Ç–∞—Ä—ã–π.
-> –í—ã–ø–æ–ª–Ω–∏—Ç–µ `docker rm -f milestrade_bot` –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.

**2. –ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –≤ Telegram**
–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏: `docker logs -f milestrade_bot`.
–ï—Å–ª–∏ —Ç–∞–º –µ—Å—Ç—å –æ—à–∏–±–∫–∏ "Unauthorized" –∏–ª–∏ "Invalid Token" -> –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª `.env` –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞.

**3. –ë–æ—Ç —É–ø–∞–ª —Å –æ—à–∏–±–∫–æ–π Chromium/Browser**
–°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –ø–∞–º—è—Ç–∏. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ –∫–æ–º–∞–Ω–¥–µ –∑–∞–ø—É—Å–∫–∞ –µ—Å—Ç—å —Ñ–ª–∞–≥ `--shm-size=2gb`.
